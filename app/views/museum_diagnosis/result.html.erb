<%=  stylesheet_link_tag 'museum_diagnosis', :media => "all" %>

<div class="result-container">
  <div class="result-header">
    <h1 class="result-title">🎉 診断結果</h1>
    <p class="result-subtitle">あなたにおすすめの博物館トップ3</p>
  </div>

  <div class="museums-results">
    <% @recommended_museums.each_with_index do |museum, index| %>
      <div class="museum-result-card rank-<%= index + 1 %>">
        <div class="rank-badge">
          <% case index + 1 %>
          <% when 1 %>
            <span class="rank-icon">🥇</span>
            <span class="rank-text">第1位</span>
          <% when 2 %>
            <span class="rank-icon">🥈</span>
            <span class="rank-text">第2位</span>
          <% when 3 %>
            <span class="rank-icon">🥉</span>
            <span class="rank-text">第3位</span>
          <% end %>
        </div>

        <div class="museum-info">
          <h2 class="museum-name"><%= museum.name %></h2>
          
          <div class="museum-details">
            <div class="detail-item">
              <span class="detail-icon">📍</span>
              <span class="detail-text"><%= museum.prefecture %> <%= museum.city %></span>
            </div>
            
            <% if museum.museum_type.present? %>
              <div class="detail-item">
                <span class="detail-icon">🏛️</span>
                <span class="detail-text"><%= museum.museum_type %></span>
              </div>
            <% end %>
            
            <% if museum.registration_type.present? %>
              <div class="detail-item">
                <span class="detail-icon">✨</span>
                <span class="detail-text"><%= museum.registration_type %></span>
              </div>
            <% end %>

            <% if museum.address.present? %>
              <div class="detail-item">
                <span class="detail-icon">🗺️</span>
                <span class="detail-text"><%= truncate(museum.address, length: 60) %></span>
              </div>
            <% end %>
          </div>

          <% if museum.description.present? %>
            <div class="museum-description">
              <%= truncate(museum.description, length: 150) %>
            </div>
          <% end %>

          <div class="museum-actions">
            <%= link_to "詳細を見る", museum_path(museum), class: "btn btn-detail" %>
            <% if museum.official_website.present? %>
              <%= link_to "公式サイト", museum.official_website, class: "btn btn-website", target: "_blank", rel: "noopener" %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="result-actions">
    <%= link_to "もう一度診断する", new_museum_diagnosis_path, class: "btn btn-retry" %>
    <%= link_to "日記一覧に戻る", journals_path, class: "btn btn-back" %>
  </div>
</div>